<div class="row" id="tedit">
  <div class="col-xs-3 col-md-2 sidebar" style="padding-top:5px;">
    <ul class="nav nav-sidebar">
      <li style="font-size:11px; text-transform:uppercase; font-weight:bold; color:#777; padding-left:5px;">pay dates</li>
      <li v-for="day in payDays">
        <a href="/time/paydate/{{ day.pay_day }}" style="font-size:11px;">{{ day.pay_day }}</a>
      </li>
    </ul>
    <ul class="nav nav-sidebar">
      <li style="font-size:11px; text-transform:uppercase; font-weight:bold; color:#777; padding-left:5px;">unassigned</li>
      <li v-for="day in unassignedDays">
        <a href="/time/{{ day.day }}" style="font-size:11px;">{{ day.day }}</a>
      </li>
    </ul>
  </div>
  <div class="col-xs-9 col-md-10 main">
    <% flash.each do |type, message| %>
      <div class="alert alert-<%= type.to_s %> fade in" id="flashmsgs" style="position:absolute;top:0px;right:0px;z-index:99999; padding:10px; min-height:52px;">
        <div class="text-center"><%= message.html_safe %></div>
      </div>
    <% end %>


    <% if @days_in_payday && @days_in_payday.any? %>
      <div style="margin:15px 0px;">
      <% @days_in_payday.each do |dt| %>
        <a href="/time/<%= dt %>" class="btn <%= dt == @day ? "btn-primary" : "btn-primary-outline"%> btn-sm"><%= dt %></a>
      <% end %>
      </div>
    <% end %>
    <form method="POST" id="pageForm" action="/time/<%= @day %>">
      <input type="hidden" name="_method" value="PUT">
    <table class="table table-sm">
      <thead>
        <th>PayDate</th>
        <th>In/Out</th>
        <th>Lunch In/Out</th>
      </thead>
      <tbody>
        <tr>
          <td>
            <input name="pay_day" value="<%= @entries.try(:first).try(:pay_day) %>" placeholder="dd/mm/yyyy">
          </td>
          <td>
            <input name="start_time" value="<%= @entries.try(:first).try(:start_time).try(:strftime,"%H:%M") %>" placeholder="in" style="width:49%">
            <input name="end_time" value="<%= @entries.try(:first).try(:end_time).try(:strftime,"%H:%M") %>" placeholder="out" style="width:49%">
          </td>
          <td>
            <input name="meal_start_time" value="<%= @entries.try(:first).try(:meal_start_time).try(:strftime,"%H:%M") %>" placeholder="in" style="width:49%">
            <input name="meal_end_time" value="<%= @entries.try(:first).try(:meal_end_time).try(:strftime,"%H:%M") %>" placeholder="out" style="width:49%">
          </td>

        </tr>
      </tbody>
    </table>

    <table class="table table-striped table-sm">
      <thead>
        <tr>
          <th>#</th>
          <th>Name</th>
          <th>SSN</th>
          <th>Rate</th>
          <th>Pieces</th>
          <th>Hours</th>
          <th>Amount</th>
        </tr>
      </thead>
      <tbody>
        <tr v-for="entry in entries">
          <th scope="row">{{entry.employee_id}}</th>
          <td>{{entry.name}}</td>
          <td>{{entry.ssn}}</td>
          <td>{{entry.rate}}</td>
          <td>{{entry.pieces}}</td>
          <td>{{entry.hours}}</td>
          <td>{{entry.amount}}</td>
        </tr>
      </tbody>
    </table>
    </form>
  </div>
</div>

<script language="javascript">
var tedit = new Vue({
  el: '#tedit',
  data: {
    payDays: <%= @pay_days.to_json.html_safe %>,
    unassignedDays: <%= @unassigned_days.to_json.html_safe %>,
    entries:  <%= @entries.to_json.html_safe %>
  }
})
</script>
